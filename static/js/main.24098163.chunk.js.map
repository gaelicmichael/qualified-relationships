{"version":3,"sources":["TimeConstraintsContext.jsx","relationships/QRManager.js","relationships/dataset.js","components/TimeSlider.jsx","components/ListView.jsx","components/SelectEntityType.jsx","components/EgoTimeRadar.jsx","components/EgoRings.jsx","components/ChordConnections.jsx","App.js","serviceWorker.js","index.js"],"names":["TimeContext","createContext","reducer","state","action","type","active","payload","current","Error","TimeContextProvider","props","useReducer","initialState","dispatch","Provider","value","children","QRManager","entityDefs","entities","relationDefs","relations","fetchEntityByID","id","find","e","fetchEntityLabel","label","fetchExpandedRelation","thisRelation","relationTypeDef","typeLabel","typeColor","color","role1","role2","entity1","entity2","start","end","fetchFilteredEntities","apply","timeVal","filter","fetchFilteredRelations","r","growRecursiveTree","treeNode","usedIDs","curDepth","maxDepth","entityID","penultimateLevel","thisID","entity","forEach","isUsed","index","otherEntityID","result","theArray","item","length","found","Math","floor","binarySearch","otherEntity","console","log","newNode","name","push","splice","thisChild","getEntityTypes","pairs","Object","entries","key","subObject","getEntityLabel","getEntities","getRelations","getEntityRelations","theEntity","expand","er","expandRelation","expandEntity","thisEntity","entityTypeDef","fetchExpandedEntity","getEntityHierarchy","tree","getMatrix","useEntities","numEntities","useRelations","links","Array","fill","map","linkIndices","getIndexOfEntity","findIndex","rI","indexID1","indexID2","matrix","dataTimeSettings","step","initial","displayTimeVal","TimeSlider","classes","useContext","Grid","container","className","root","alignItems","xs","FormControlLabel","control","Switch","checked","onChange","event","target","Slider","defaultValue","min","max","marks","valueLabelDisplay","newValue","getAriaValueText","aria-labelledby","useStyles","makeStyles","theme","table","minWidth","divider","margin","spacing","StyledTableCell","withStyles","head","backgroundColor","palette","common","white","black","TableCell","ListView","inheritClasses","qrManager","listClasses","Typography","variant","component","TableContainer","Paper","Table","size","aria-label","TableHead","TableRow","align","TableBody","scope","Divider","fullRelation","formControl","SelectEntityType","types","selected","selectClasses","FormControl","InputLabel","Select","labelId","typeDef","MenuItem","selectedName","marginLeft","marginRight","width","outerWrapper","display","padding","buttonColumn","maxHeight","overflowY","fontSize","flexShrink","buttonPaper","button","graph","flexGrow","tooltip","boxShadow","pointerEvents","maxWidth","borderRadius","border","withTooltip","timeScale","tooltipOpen","tooltipData","tooltipLeft","tooltipTop","hideTooltip","showTooltip","radarClasses","entityTypes","useState","selectedEntityType","setSelectedEntityType","selectedEntity","setSelectedEntity","selectedEntityName","setSelectedEntityName","visibleEntities","appears","i","scaleLinear","domain","range","pixWidth","TextField","ButtonGroup","orientation","Button","onClick","height","rx","Group","top","pixHeight","left","Pie","data","pieValue","cornerRadius","padAngle","outerRadius","p","innerRadius","pie","arcs","arc","d","path","fillOpacity","stroke","strokeWidth","onMouseOver","datum","coords","localPoint","ownerSVGElement","labelStr","x","y","mouseOverRelation","onMouseOut","ticks","tick","strokeOpacity","dy","textAnchor","Tooltip","selectEmpty","marginTop","ringClasses","numRings","setNumRings","prepTree","eh","hierarchy","mouseOverEntity","Tree","PI","endRadius","separation","a","b","parent","depth","link","LinkRadial","percent","descendants","node","pointRadial","radialX","radialY","fullEntity","strokeDash","rounding","strokeDasharray","descending","NaN","chordClasses","Chord","sortSubgroups","chords","groups","group","expandedEntity","Arc","chord","sourceIndex","source","targetIndex","linkIndex","expandedRelation","Ribbon","radius","fromEntity","toEntity","appBar","zIndex","drawer","drawerPaper","content","toolbar","mixins","darkTheme","createMuiTheme","displayModes","Person","Band","Instrument","membership","roles","roleColors","plays","descent","App","displayMode","setDisplayMode","ThemeProvider","CssBaseline","AppBar","position","Toolbar","noWrap","Drawer","paper","List","dense","ListItem","ListItemText","primary","Fragment","gutterBottom","paragraph","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.24098163.chunk.js","sourcesContent":["import React, { useReducer, createContext } from \"react\";\n\nexport const TimeContext = createContext();\n\nconst reducer = (state, action) => {\n  switch(action.type) {\n  case 'SET_ACTIVE':\n    return { ...state, active: action.payload };\n  case 'SET_CURRENT':\n    return { ...state, current: action.payload };\n  default:\n    throw new Error();\n  }\n}\n\nexport function TimeContextProvider(props) {\n  const [state, dispatch] = useReducer(reducer, props.initialState);\n\n  return (\n    <TimeContext.Provider value={[state, dispatch]}>\n      {props.children}\n    </TimeContext.Provider>\n  );\n};\n","/*** QR Management System\n *** Function closure that manages entities and relationships\n *** INPUT\n ***  entityDefs: object of\n ***    [id]: {\n ***      label: String\n ***      color: String\n ***      roles: [String]\n ***      roleColors: [String]\n ***    }\n ***\n ***  entities: array of\n ***    id: *\n ***    label: String\n ***    type: String\n ***    start: Number\n ***    end: Number\n ***\n ***  relationDefs: object of\n ***    [id]: {\n ***      label: String\n ***      color: String\n ***      roles: [ String ]\n ***      roleColors: [ String ]\n ***    }\n ***\n ***  relations: array of\n ***    id: *\n ***    type: String (corresponds to name of relationDef)\n ***    role1: String\n ***    role2: String\n ***    entity1: *\n ***    entity2: *\n ***    start: Number\n ***    end: Number\n ***/\n\nfunction QRManager(entityDefs, entities, relationDefs, relations) {\n\n  function binarySearch(value, theArray) {\n    let start=0, end=theArray.length-1, index, item;\n\n    if (theArray.length === 0) {\n      return { found: false, index: 0 }\n    }\n\n    // Iterate while start not meets end \n    while (start <= end) {\n        // Find the mid index \n        index = Math.floor((start + end)/2);\n        item = theArray[index];\n        // If element is present at mid, return True\n        if (item === value) {\n          return { found: true, index }\n        // Else look in left or right half accordingly \n        } else if (item < value) {\n          start = index + 1;\n        } else {\n          end = index - 1;\n        }\n    }\n\n    // if current item is less than desired, then desired item goes after it\n    if (item < value) {\n      return { found: false, index: index + 1 };\n    }\n    return { found: false, index };\n  } // binarySearch()\n\n  function fetchEntityByID(id) {\n    return entities.find(e => (e.id === id));\n  }\n\n  function fetchEntityLabel(id) {\n    const e = fetchEntityByID(id);\n    return e ? e.label : '';\n  }\n\n  function fetchExpandedRelation(thisRelation) {\n    const relationTypeDef = relationDefs[thisRelation.type];\n\n    return {\n      id: thisRelation.id,\n      type: thisRelation.type,\n      typeLabel: relationTypeDef.label,\n      typeColor: relationTypeDef.color,\n      role1: thisRelation.role1,\n      role2: thisRelation.role2,\n      entity1: fetchEntityLabel(thisRelation.entity1),\n      entity2: fetchEntityLabel(thisRelation.entity2),\n      start: thisRelation.start,\n      end: thisRelation.end,\n    }\n  } // fetchExpandedRelation()\n\n  function fetchExpandedEntity(thisEntity) {\n    const entityTypeDef = entityDefs[thisEntity.type];\n\n    return {\n      id: thisEntity.id,\n      label: thisEntity.label,\n      type: thisEntity.type,\n      typeLabel: entityTypeDef.label,\n      typeColor: entityTypeDef.color,\n      start: thisEntity.start,\n      end: thisEntity.end,\n    }\n  } // fetchExpandedEntity()\n\n  function fetchFilteredEntities(apply, timeVal) {\n    if (!apply) {\n      return entities;\n    }\n    return entities.filter(e => (e.start <= timeVal && timeVal <= e.end));\n  } // fetchFilteredEntities()\n\n  function fetchFilteredRelations(apply, timeVal) {\n    if (!apply) {\n      return relations;\n    }\n    return relations.filter(r => (r.start <= timeVal && timeVal <= r.end));\n  } // fetchFilteredRelations()\n\n  // RETURNS: Array of relations involving this entity\n  function fetchRelationsFor(entityID) {\n    return relations.filter(r => ((r.entity1 === entityID) || (r.entity2 === entityID)));\n  } // fetchRelationsFor()\n\n  // PURPOSE: Do the next level of tree growth in tree rooted in top node if\n  //           not reached bottom, keeping track of relations used in usedIDs.\n  //        { name, entity, children: [] }\n  function growRecursiveTree(treeNode, usedIDs, curDepth, maxDepth, apply, timeVal) {\n    if (curDepth >= maxDepth) {\n      return;\n    }\n    let penultimateLevel = ((curDepth + 1) === maxDepth);\n    let thisID = treeNode.entity.id;\n    let curRelations = fetchRelationsFor(thisID);\n\n    curRelations.forEach(function(thisRelation) {\n      let isUsed, index;\n\n      // Ignore if other entity has already appeared\n      let otherEntityID = (thisRelation.entity1 === thisID) ? thisRelation.entity2 : thisRelation.entity1;\n      let result = binarySearch(otherEntityID, usedIDs);\n      isUsed = result.found;\n      index = result.index;\n\n      if (!isUsed) {\n        let otherEntity = fetchEntityByID(otherEntityID);\n        if (!otherEntity) {\n          console.log(\"Data error in relation [non-existing entity reference] \", thisRelation);\n        }\n        // Apply time constraints\n        if (!apply || (thisRelation.start <= timeVal && timeVal <= thisRelation.end)) {\n          let newNode = penultimateLevel ? { name: otherEntityID, entity: otherEntity } :\n                                            { name: otherEntityID, entity: otherEntity, children: [] };\n          // Add this node to current children\n          treeNode.children.push(newNode);\n          // Add this relation to list of used\n          if (usedIDs.length === 0) {\n            usedIDs.push(otherEntityID);\n          } else {\n            usedIDs.splice(index, 0, otherEntityID);\n          }\n        }\n      }\n    });\n    // recurse through all new children (breath not depth recusion)\n    if (treeNode.children) {\n      treeNode.children.forEach(function(thisChild) {\n        // depth recurse on new child\n        growRecursiveTree(thisChild, usedIDs, curDepth + 1, maxDepth, apply, timeVal);\n      });\n    }\n  } // growRecursiveTree()\n\n  return {\n    getEntityTypes: function() {\n      let pairs = [];\n      for (let [key, subObject] of Object.entries(entityDefs)) {\n        pairs.push({ key, label: subObject.label });\n      }\n      return pairs;\n    },\n\n    getEntityLabel: function(id) {\n      return fetchEntityLabel(id);\n    }, // getEntityLabel()\n\n    // RETURN: array of { id, label }\n    getEntities: function(apply, timeVal) {\n      return fetchFilteredEntities(apply, timeVal);\n    }, // getEntities()\n\n    getRelations: function(apply, timeVal) {\n      return fetchFilteredRelations(apply, timeVal);\n    },\n\n    getEntityRelations: function(theEntity, expand) {\n      let id = theEntity.id;\n      if (expand) {\n        let er = [];\n        relations.forEach(function(thisRelation) {\n          if ((thisRelation.entity1 === id) || (thisRelation.entity2 === id)) {\n            er.push(fetchExpandedRelation(thisRelation));\n          }\n        });\n        return er;\n      } else {\n        return relations.filter(r => (r.entity1 === id) || (r.entity2 === id));\n      }\n    },\n  \n    // RETURN: object with expanded fields\n    expandRelation: function(thisRelation) {\n      return fetchExpandedRelation(thisRelation);\n    },\n\n    expandEntity: function(thisEntity) {\n      return fetchExpandedEntity(thisEntity);\n    },\n  \n    // RETURN: D3 hierarchy centered on theEntity, applying time constraints\n    //        { name, entity, children: [] }\n    // NOTES:  Need to recurse down to # of max depth; usedIDs maintains a list\n    //          of entity IDs (in order) to ensure we don’t retraverse the\n    //          same relations back and forth\n    getEntityHierarchy: function(theEntity, maxDepth, apply, timeVal) {\n      let usedIDs = [theEntity.id];\n      let tree = { name: theEntity.id, entity: theEntity, children: [] };\n      growRecursiveTree(tree, usedIDs, 0, maxDepth, apply, timeVal);\n      return tree;\n    },\n\n    // RETURN: A matrix used for making D3 chart\n    getMatrix: function(apply, timeVal) {\n      // Get filtered entities and relations\n      const useEntities = fetchFilteredEntities(apply, timeVal);\n      const numEntities = useEntities.length;\n      const useRelations = fetchFilteredRelations(apply, timeVal);\n      // Create square matrix for “size” of links (always 1)\n      let links = new Array(numEntities).fill(0).map(() => new Array(numEntities).fill(0));\n      // Create square matrix for index pf relation\n      let linkIndices = new Array(numEntities).fill(0).map(() => new Array(numEntities).fill(-1));\n\n      function getIndexOfEntity(id) {\n        return useEntities.findIndex(e => e.id === id);\n      }\n\n      // Iterate through relations and check each symmetric connection\n      useRelations.forEach(function(thisRelation, rI) {\n        let indexID1 = getIndexOfEntity(thisRelation.entity1);\n        let indexID2 = getIndexOfEntity(thisRelation.entity2);\n          // Only if both endpoints of relation exist according to \n        if ((indexID1 >= 0) && (indexID2 >= 0)) {\n          links[indexID1][indexID2] = 1;\n          links[indexID2][indexID1] = 1;\n          linkIndices[indexID1][indexID2] = rI;\n          linkIndices[indexID2][indexID1] = rI;\n        }\n      });\n\n      return { matrix: links, linkIndices, entities: useEntities, relations: useRelations };\n    } // getMatrix()\n\n  } // return\n\n} // QRManager()\n\nexport default QRManager;","// New data set: Art Rock\nexport const dataTimeSettings = {\n  start: 1940,\n  end: 2020,\n  step: 1,\n  initial: 1975,\n  active: false,\n  current: 1975,\n}\n\nexport const entityDefs = {\n  Person: {\n    label: 'Person',\n    color: 'blue'\n  },\n  Band: {\n    label: 'Band',\n    color: 'red'\n  },\n  Instrument: {\n    label: 'Instrument',\n    color: 'green'\n  },\n}\n\nexport const dataRelationDefs = {\n  membership: {\n    label: 'Membership',\n    color: 'red',\n    roles: [ 'Band', 'Member', 'Producer' ],\n    roleColors: [ 'lightred', 'darkred', 'darkred' ],\n  },\n  plays: {\n    label: 'Plays',\n    color: 'yellow',\n    roles: [ 'Musician', 'Instrument' ],\n    roleColors: [ 'gold', 'goldenrod' ]\n  },\n  descent: {\n    label: 'Descent',\n    color: 'red',\n    roles: [ 'Father', 'Mother', 'Son', 'Daughter' ],\n    roleColors: [ 'lightred', 'lightred', 'darkred', 'darkred' ],\n  },\n}\n\nexport const dataEntities = [\n  { id:   1, label: 'Guitar', type: 'Instrument', start: 1940, end: 2020 },\n  { id:   2, label: 'Bass', type: 'Instrument', start: 1940, end: 2020 },\n  { id:   3, label: 'Keyboards', type: 'Instrument', start: 1940, end: 2020 },\n  { id:   4, label: 'Drums', type: 'Instrument', start: 1940, end: 2020 },\n  { id:   5, label: 'Vocal', type: 'Instrument', start: 1940, end: 2020 },\n  { id:   6, label: 'Aerophones', type: 'Instrument', start: 1940, end: 2020 },\n\n  { id:  10, label: 'Yes', type: 'Band', start: 1968, end: 2020 },\n  { id:  11, label: 'Genesis', type: 'Band', start: 1967, end: 2020 },\n  { id:  12, label: 'King Crimson', type: 'Band', start: 1968, end: 2020 },\n  { id:  13, label: 'ELP', type: 'Band', start: 1970, end: 2010 },\n  { id:  14, label: 'Asia', type: 'Band', start: 1981, end: 2020 },\n\n  { id:  30, label: 'Jon Anderson', type: 'Person', start: 1944, end: 2020 },\n  { id:  31, label: 'Chris Squire', type: 'Person', start: 1948, end: 2015 },\n  { id:  32, label: 'Peter Banks', type: 'Person', start: 1947, end: 2013 },\n  { id:  33, label: 'Bill Bruford', type: 'Person', start: 1949, end: 2020 },\n  { id:  34, label: 'Tony Kaye', type: 'Person', start: 1945, end: 2020 },\n  { id:  35, label: 'Steve Howe', type: 'Person', start: 1947, end: 2020 },\n  { id:  36, label: 'Alan White', type: 'Person', start: 1949, end: 2020 },\n  { id:  37, label: 'Geoff Downes', type: 'Person', start: 1952, end: 2020 },\n  { id:  38, label: 'Billy Sherwood', type: 'Person', start: 1965, end: 2020 },\n  { id:  39, label: 'Jon Davison', type: 'Person', start: 1971, end: 2020 },\n  { id:  40, label: 'Rick Wakeman', type: 'Person', start: 1949, end: 2020 },\n  { id:  41, label: 'Patrick Moraz', type: 'Person', start: 1948, end: 2020 },\n  { id:  42, label: 'Trevor Horn', type: 'Person', start: 1949, end: 2020 },\n  { id:  43, label: 'Trevor Rabin', type: 'Person', start: 1954, end: 2020 },\n  { id:  44, label: 'Igor Khoroshev', type: 'Person', start: 1965, end: 2020 },\n  { id:  45, label: 'Oliver Wakeman', type: 'Person', start: 1972, end: 2020 },\n  { id:  46, label: 'Benoît David', type: 'Person', start: 1966, end: 2020 },\n  { id:  47, label: 'Tony Banks', type: 'Person', start: 1950, end: 2020 },\n  { id:  48, label: 'Mike Rutherford', type: 'Person', start: 1950, end: 2020 },\n  { id:  49, label: 'Phil Collins', type: 'Person', start: 1951, end: 2020 },\n  { id:  50, label: 'Peter Gabriel', type: 'Person', start: 1950, end: 2020 },\n  { id:  51, label: 'Anthony Phillips', type: 'Person', start: 1951, end: 2020 },\n  { id:  53, label: 'Steve Hackett', type: 'Person', start: 1950, end: 2020 },\n  { id:  54, label: 'Robert Fripp', type: 'Person', start: 1946, end: 2020 },\n  { id:  55, label: 'Mel Collins', type: 'Person', start: 1947, end: 2020 },\n  { id:  56, label: 'Tony Levin', type: 'Person', start: 1946, end: 2020 },\n  { id:  57, label: 'Pat Mastelotto', type: 'Person', start: 1955, end: 2020 },\n  { id:  58, label: 'Gavin Harrison', type: 'Person', start: 1963, end: 2020 },\n  { id:  59, label: 'Jakko Jakszyk', type: 'Person', start: 1958, end: 2020 },\n  { id:  60, label: 'Jeremy Stacey', type: 'Person', start: 1963, end: 2020 },\n  { id:  61, label: 'Peter Sinfield', type: 'Person', start: 1943, end: 2020 },\n  { id:  62, label: 'Greg Lake', type: 'Person', start: 1947, end: 2016 },\n  { id:  63, label: 'Michael Giles', type: 'Person', start: 1942, end: 2020 },\n  { id:  64, label: 'Ian McDonald', type: 'Person', start: 1946, end: 2020 },\n  { id:  65, label: 'Gordon Haskell', type: 'Person', start: 1946, end: 2020 },\n  { id:  66, label: 'Andrew McCulloch', type: 'Person', start: 1945, end: 2020 },\n  { id:  67, label: 'Ian Wallace', type: 'Person', start: 1946, end: 2020 },\n  { id:  68, label: 'Raymond “Boz” Burrell', type: 'Person', start: 1946, end: 2006 },\n  { id:  69, label: 'John Wetton', type: 'Person', start: 1949, end: 2017 },\n  { id:  70, label: 'Trey Gunn', type: 'Person', start: 1960, end: 2020 },\n  { id:  71, label: 'Adrian Belew', type: 'Person', start: 1949, end: 2020 },\n  { id:  72, label: 'Bill Rieflin', type: 'Person', start: 1960, end: 2020 },\n  { id:  73, label: 'Keith Emerson', type: 'Person', start: 1944, end: 2016 },\n  { id:  74, label: 'Carl Palmer', type: 'Person', start: 1950, end: 2020 },\n]\n\nexport const dataRelations = [\n  { id:   1, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 30, entity2: 5, start: 1944, end: 2020 },\n  { id:   2, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 31, entity2: 2, start: 1948, end: 2015 },\n  { id:   3, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 31, entity2: 5, start: 1948, end: 2015 },\n  { id:   4, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 32, entity2: 1, start: 1947, end: 2013 },\n  { id:   5, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 33, entity2: 4, start: 1949, end: 2020 },\n  { id:   6, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 34, entity2: 3, start: 1945, end: 2020 },\n  { id:   7, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 35, entity2: 1, start: 1947, end: 2020 },\n  { id:   8, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 35, entity2: 5, start: 1947, end: 2020 },\n  { id:   9, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 36, entity2: 4, start: 1949, end: 2020 },\n  { id:  10, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 37, entity2: 3, start: 1952, end: 2020 },\n  { id:  11, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 38, entity2: 2, start: 1965, end: 2020 },\n  { id:  12, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 38, entity2: 5, start: 1965, end: 2020 },\n  { id:  13, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 39, entity2: 5, start: 1971, end: 2020 },\n  { id:  14, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 40, entity2: 3, start: 1949, end: 2020 },\n  { id:  15, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 41, entity2: 3, start: 1948, end: 2020 },\n  { id:  16, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 42, entity2: 5, start: 1949, end: 2020 },\n  { id:  17, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 43, entity2: 1, start: 1954, end: 2020 },\n  { id:  18, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 44, entity2: 3, start: 1965, end: 2020 },\n  { id:  19, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 45, entity2: 3, start: 1972, end: 2020 },\n  { id:  20, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 46, entity2: 5, start: 1966, end: 2020 },\n  { id:  21, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 47, entity2: 3, start: 1950, end: 2020 },\n  { id:  22, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 48, entity2: 3, start: 1950, end: 2020 },\n  { id:  23, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 49, entity2: 4, start: 1951, end: 2020 },\n  { id:  24, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 49, entity2: 5, start: 1951, end: 2020 },\n  { id:  25, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 50, entity2: 5, start: 1950, end: 2020 },\n  { id:  26, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 51, entity2: 1, start: 1951, end: 2020 },\n  { id:  28, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 53, entity2: 1, start: 1950, end: 2020 },\n  { id:  30, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 54, entity2: 1, start: 1946, end: 2020 },\n  { id:  31, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 55, entity2: 6, start: 1947, end: 2020 },\n  { id:  32, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 56, entity2: 1, start: 1946, end: 2020 },\n  { id:  33, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 57, entity2: 4, start: 1955, end: 2020 },\n  { id:  34, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 58, entity2: 4, start: 1963, end: 2020 },\n  { id:  35, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 59, entity2: 5, start: 1958, end: 2020 },\n  { id:  36, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 59, entity2: 1, start: 1958, end: 2020 },\n  { id:  37, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 60, entity2: 3, start: 1963, end: 2020 },\n  { id:  38, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 61, entity2: 1, start: 1943, end: 2020 },\n  { id:  39, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 61, entity2: 3, start: 1943, end: 2020 },\n  { id:  40, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 61, entity2: 5, start: 1943, end: 2020 },\n  { id:  41, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 62, entity2: 1, start: 1947, end: 2016 },\n  { id:  42, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 62, entity2: 5, start: 1947, end: 2016 },\n  { id:  43, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 63, entity2: 4, start: 1942, end: 2020 },\n  { id:  44, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 64, entity2: 6, start: 1946, end: 2020 },\n  { id:  45, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 65, entity2: 2, start: 1946, end: 2020 },\n  { id:  46, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 65, entity2: 5, start: 1946, end: 2020 },\n  { id:  47, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 66, entity2: 4, start: 1945, end: 2020 },\n  { id:  48, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 67, entity2: 4, start: 1946, end: 2020 },\n  { id:  49, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 68, entity2: 2, start: 1946, end: 2006 },\n  { id:  50, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 69, entity2: 2, start: 1949, end: 2017 },\n  { id:  51, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 69, entity2: 5, start: 1949, end: 2017 },\n  { id:  53, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 71, entity2: 1, start: 1949, end: 2020 },\n  { id:  54, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 71, entity2: 5, start: 1949, end: 2020 },\n  { id:  55, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 72, entity2: 3, start: 1960, end: 2020 },\n  { id:  56, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 72, entity2: 4, start: 1960, end: 2020 },\n  { id:  57, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 73, entity2: 3, start: 1944, end: 2016 },\n  { id:  58, type: 'plays', role1: 'Musician', role2: 'Instrument', entity1: 74, entity2: 4, start: 1950, end: 2020 },\n\n  { id: 100, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 30, start: 1968, end: 1980 },\n  { id: 101, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 30, start: 1983, end: 1988 },\n  { id: 102, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 30, start: 1990, end: 2004 },\n  { id: 103, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 31, start: 1968, end: 2015 },\n  { id: 104, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 32, start: 1968, end: 1970 },\n  { id: 105, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 33, start: 1968, end: 1972 },\n  { id: 106, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 34, start: 1968, end: 1971 },\n  { id: 107, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 34, start: 1982, end: 1994 },\n  { id: 108, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 35, start: 1970, end: 1981 },\n  { id: 109, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 35, start: 1990, end: 1993 },\n  { id: 110, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 35, start: 1995, end: 2020 },\n  { id: 111, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 36, start: 1972, end: 2020 },\n  { id: 112, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 37, start: 1980, end: 1981 },\n  { id: 113, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 37, start: 2010, end: 2020 },\n  { id: 114, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 38, start: 1997, end: 2000 },\n  { id: 115, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 39, start: 2012, end: 2020 },\n  { id: 116, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 40, start: 1971, end: 1973 },\n  { id: 117, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 40, start: 1976, end: 1980 },\n  { id: 118, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 40, start: 1990, end: 1992 },\n  { id: 119, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 40, start: 1995, end: 1997 },\n  { id: 120, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 40, start: 2002, end: 2008 },\n  { id: 121, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 41, start: 1974, end: 1975 },\n  { id: 122, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 42, start: 1980, end: 1981 },\n  { id: 123, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 42, start: 1980, end: 1981 },\n  { id: 124, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 42, start: 2018, end: 2018 },\n  { id: 125, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 43, start: 1982, end: 1994 },\n  { id: 126, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 44, start: 1997, end: 2001 },\n  { id: 127, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 45, start: 2008, end: 2010 },\n  { id: 128, type: 'membership', role1: 'Band', role2: 'Member', entity1: 10, entity2: 46, start: 2008, end: 2012 },\n\n  { id: 150, type: 'membership', role1: 'Band', role2: 'Member', entity1: 11, entity2: 47, start: 1967, end: 2020 },\n  { id: 151, type: 'membership', role1: 'Band', role2: 'Member', entity1: 11, entity2: 48, start: 1967, end: 2020 },\n  { id: 152, type: 'membership', role1: 'Band', role2: 'Member', entity1: 11, entity2: 49, start: 1970, end: 2020 },\n  { id: 153, type: 'membership', role1: 'Band', role2: 'Member', entity1: 11, entity2: 50, start: 1967, end: 1975 },\n  { id: 154, type: 'membership', role1: 'Band', role2: 'Member', entity1: 11, entity2: 51, start: 1967, end: 1970 },\n  { id: 156, type: 'membership', role1: 'Band', role2: 'Member', entity1: 11, entity2: 53, start: 1971, end: 1977 },\n\n  { id: 160, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 54, start: 1968, end: 2020 },\n  { id: 161, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 55, start: 1970, end: 1972 },\n  { id: 162, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 55, start: 2013, end: 2020 },\n  { id: 163, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 56, start: 1981, end: 1996 },\n  { id: 164, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 56, start: 2014, end: 2017 },\n  { id: 165, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 57, start: 1994, end: 2020 },\n  { id: 166, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 58, start: 2008, end: 2020 },\n  { id: 167, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 59, start: 2013, end: 2020 },\n  { id: 168, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 60, start: 2016, end: 2020 },\n  { id: 169, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 61, start: 1968, end: 1972 },\n  { id: 170, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 62, start: 1968, end: 1970 },\n  { id: 171, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 63, start: 1968, end: 1969 },\n  { id: 172, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 64, start: 1969, end: 1969 },\n  { id: 173, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 65, start: 1970, end: 1970 },\n  { id: 174, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 66, start: 1970, end: 1970 },\n  { id: 175, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 67, start: 1971, end: 1972 },\n  { id: 176, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 68, start: 1971, end: 1972 },\n  { id: 177, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 33, start: 1972, end: 1974 },\n  { id: 178, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 33, start: 1981, end: 1984 },\n  { id: 179, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 33, start: 1994, end: 1997 },\n  { id: 180, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 69, start: 1972, end: 1974 },\n  { id: 181, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 70, start: 1994, end: 2003 },\n  { id: 182, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 71, start: 1981, end: 2013 },\n  { id: 183, type: 'membership', role1: 'Band', role2: 'Member', entity1: 12, entity2: 72, start: 2013, end: 2020 },\n\n  { id: 190, type: 'membership', role1: 'Band', role2: 'Member', entity1: 13, entity2: 73, start: 1970, end: 2010 },\n  { id: 191, type: 'membership', role1: 'Band', role2: 'Member', entity1: 13, entity2: 74, start: 1970, end: 2010 },\n  { id: 192, type: 'membership', role1: 'Band', role2: 'Member', entity1: 13, entity2: 62, start: 1970, end: 2010 },\n\n  { id: 200, type: 'membership', role1: 'Band', role2: 'Member', entity1: 14, entity2: 37, start: 1981, end: 2006 },\n  { id: 201, type: 'membership', role1: 'Band', role2: 'Member', entity1: 14, entity2: 35, start: 1981, end: 1983 },\n  { id: 202, type: 'membership', role1: 'Band', role2: 'Member', entity1: 14, entity2: 35, start: 2006, end: 2013 },\n  { id: 203, type: 'membership', role1: 'Band', role2: 'Member', entity1: 14, entity2: 69, start: 1981, end: 1985 },\n  { id: 204, type: 'membership', role1: 'Band', role2: 'Member', entity1: 14, entity2: 69, start: 2006, end: 2014 },\n  { id: 205, type: 'membership', role1: 'Band', role2: 'Member', entity1: 14, entity2: 74, start: 1981, end: 1991 },\n  { id: 206, type: 'membership', role1: 'Band', role2: 'Member', entity1: 14, entity2: 74, start: 2006, end: 2020 },\n\n]\n","import React, { useContext } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Slider from '@material-ui/core/Slider';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\n\nimport { TimeContext } from '../TimeConstraintsContext';\n\nfunction displayTimeVal(value) {\n  return `${value}°C`;\n}\n\n// INPUT: classes is object with CSS classes\n//        timeParams is object with start, end, step, default\n//        callback takes (active, timeVal)\nfunction TimeSlider({ classes }) {\n  const [state, dispatch] = useContext(TimeContext);\n\n  function setActive(event) {\n    dispatch({ type: 'SET_ACTIVE', payload: event.target.checked });\n  }\n\n  function setCurrent(event, newValue) {\n    dispatch({ type: 'SET_CURRENT', payload: newValue });\n  }\n\n  return (\n    <Grid container className={classes.root} alignItems=\"center\">\n      <Grid item xs={3}>\n        <FormControlLabel\n          control={\n            <Switch checked={state.active} onChange={setActive} name=\"timeSliderOn\" color=\"primary\" />\n          }\n          label=\"Limit By Time\"\n        />\n      </Grid>\n      <Grid item xs={9}>\n        <Slider value={state.current} defaultValue={state.initial}\n            min={state.start} max={state.end}\n            step={state.step} marks valueLabelDisplay=\"auto\" onChange={setCurrent}\n            getAriaValueText={displayTimeVal} aria-labelledby=\"discrete-slider-small-steps\"\n        />\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default TimeSlider;","/***\n * ListView -- Display entities and relationships in spreadsheet form.\n * \n * TODO\n *    Ability to click column headers to set sort order\n */\n\nimport React, { Fragment, useContext } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Divider from '@material-ui/core/Divider';\nimport Typography from '@material-ui/core/Typography'\n\n// App-specific components\nimport TimeSlider from './TimeSlider'\nimport { TimeContext } from '../TimeConstraintsContext';\n\nconst useStyles = makeStyles((theme) => ({\n  table: {\n    minWidth: 500,\n  },\n  divider: {\n    margin: theme.spacing(2),\n  }\n}));\n\nconst StyledTableCell = withStyles((theme) => ({\n  head: {\n    backgroundColor: theme.palette.common.white,\n    color: theme.palette.common.black,\n  },\n}))(TableCell);\n\nfunction ListView({ inheritClasses, qrManager }) {\n  const listClasses = useStyles();\n  const [state] = useContext(TimeContext);\n\n  return (\n    <Fragment>\n      <TimeSlider classes={inheritClasses} />\n\n      <Typography variant=\"h4\" component=\"h4\">\n        Entities\n      </Typography>\n      <TableContainer component={Paper}>\n        <Table className={listClasses.table} size=\"small\" aria-label=\"entity table\">\n          <TableHead>\n            <TableRow>\n              <StyledTableCell>Entity Name</StyledTableCell>\n              <StyledTableCell align=\"left\">Type</StyledTableCell>\n              <StyledTableCell align=\"left\">Start</StyledTableCell>\n              <StyledTableCell align=\"left\">End</StyledTableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {qrManager.getEntities(state.active, state.current).map((entity) => (\n              <TableRow key={entity.id}>\n                <TableCell component=\"th\" scope=\"row\">\n                  {entity.label}\n                </TableCell>\n                <TableCell align=\"left\">{entity.type}</TableCell>\n                <TableCell align=\"left\">{entity.start}</TableCell>\n                <TableCell align=\"left\">{entity.end}</TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      <Divider className={listClasses.divider} variant=\"middle\" />\n\n      <Typography variant=\"h4\" component=\"h4\">\n        Relationships\n      </Typography>\n      <TableContainer component={Paper}>\n        <Table className={listClasses.table} size=\"small\" aria-label=\"relationship table\">\n          <TableHead>\n            <TableRow>\n              <StyledTableCell>Relationship Type</StyledTableCell>\n              <StyledTableCell align=\"left\">Entity 1</StyledTableCell>\n              <StyledTableCell align=\"left\">Entity 2</StyledTableCell>\n              <StyledTableCell align=\"left\">Role 1</StyledTableCell>\n              <StyledTableCell align=\"left\">Role 2</StyledTableCell>\n              <StyledTableCell align=\"left\">Start</StyledTableCell>\n              <StyledTableCell align=\"left\">End</StyledTableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            { qrManager.getRelations(state.active, state.current).map((r) => {\n              let fullRelation = qrManager.expandRelation(r)\n              return (\n                <TableRow key={r.id}>\n                  <TableCell component=\"th\" scope=\"row\">\n                    {fullRelation.type}\n                  </TableCell>\n                  <TableCell align=\"left\">{fullRelation.entity1}</TableCell>\n                  <TableCell align=\"left\">{fullRelation.entity2}</TableCell>\n                  <TableCell align=\"left\">{fullRelation.role1}</TableCell>\n                  <TableCell align=\"left\">{fullRelation.role2}</TableCell>\n                  <TableCell align=\"left\">{fullRelation.start}</TableCell>\n                  <TableCell align=\"left\">{fullRelation.end}</TableCell>\n                </TableRow>\n              )\n            })}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </Fragment>\n  );\n}\n\nexport default ListView;","/***\n **\n **/\n\n\nimport React from 'react';\n\n// Material-UI\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 180,\n  },\n}));\n\nexport function SelectEntityType({ types, selected, onChange }) {\n  const selectClasses = useStyles();\n\n  return (\n    <FormControl className={selectClasses.formControl}>\n      <InputLabel id=\"select-entity-type-label\">Show Entities Of Type</InputLabel>\n      <Select labelId=\"select-entity-type-label\" id=\"select-entity-type\" value={selected} onChange={onChange}>\n        { types.map(typeDef =>\n          <MenuItem key={typeDef.key} value={typeDef.key}>{typeDef.label}</MenuItem>\n        )}\n      </Select>\n    </FormControl>\n  )\n}\n","/***\n * EgoTimeRadar -- User chooses an entity, all relationships with that entity\n *    are displayed over time.\n * \n * TODO\n *    Select type of entity shown on button list\n *    Create Context with reducers to simplify filtering ?\n */\n\nimport React, { Fragment, useState, useContext } from 'react';\n\n// Material-UI\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport TextField from '@material-ui/core/TextField';\n\n// VX\nimport { localPoint } from '@vx/event';\nimport { scaleLinear } from '@vx/scale';\nimport { Pie } from '@vx/shape';\nimport { Group } from '@vx/group';\nimport { withTooltip, Tooltip } from '@vx/tooltip';\n\n// App-specific components\nimport TimeSlider from './TimeSlider'\nimport { TimeContext } from '../TimeConstraintsContext';\nimport { SelectEntityType } from './SelectEntityType';\n\nconst buttonWidth = 200;  // Pixel width of button column (with entity names)\n\nconst pixWidth = 600;\nconst pixHeight = 600;\nconst centerY = pixHeight / 2;\nconst centerX = pixWidth / 2;\n\nconst startRadius = 10;   // pixel start of circles (min-time)\nconst endRadius = ((pixWidth / 2) - 10);  // pixel end of circles (max-time)\n\n// const white = '#ffffff';\nconst grey = '#999999';\nconst black = '#000000';\n\nconst useStyles = makeStyles((theme) => ({\n  selectedName: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: '32ch',\n  },\n  outerWrapper: {\n    display: 'flex',\n    padding: theme.spacing(0),\n    '& > *': {\n      margin: theme.spacing(0),\n    },\n  },\n  buttonColumn: {\n    width: buttonWidth,\n    maxHeight: `${pixHeight}px`,\n    overflowY: 'scroll',\n    fontSize: '10px',\n    flexShrink: 0,\n    margin: theme.spacing(0),\n  },\n  buttonPaper: {\n    width: buttonWidth,\n  },\n  button: {\n    fontSize: '10px',\n    padding: theme.spacing(1),\n  },\n  graph: {\n    flexGrow: 1,\n    padding: theme.spacing(0),\n    margin: theme.spacing(0),\n  },\n  tooltip: {\n    backgroundColor: 'black',\n    color: 'lightblue',\n    padding: 6,\n    fontSize: 12,\n    boxShadow: '0 4px 8px 0 rgba(25, 29, 34, 0.1)',\n    pointerEvents: 'none',\n    maxWidth: '250px',\n    borderRadius: 3,\n    border: '2px solid rgba(25, 29, 34, 0.12)',\n  },\n}));\n\nfunction EgoTimeRadar(props) {\n  const {\n    inheritClasses,\n    qrManager,\n    tooltipOpen,\n    tooltipData,\n    tooltipLeft,\n    tooltipTop,\n    hideTooltip,\n    showTooltip,\n  } = props;\n\n  const radarClasses = useStyles();\n  const [state] = useContext(TimeContext);\n\n  // Get list of entity types\n  const entityTypes = qrManager.getEntityTypes();\n\n  const [selectedEntityType, setSelectedEntityType] = useState(null);\n  const [selectedEntity, setSelectedEntity] = useState(null);\n  const [selectedEntityName, setSelectedEntityName] = useState('');\n\n  // Get list of entities qualified by time parameters\n  const visibleEntities = qrManager.getEntities(state.active, state.current);\n\n  // As Time Slider may have made last selection invisible, check that it is still available\n  if (selectedEntity && state.active) {\n    let appears = false;\n    for (let i=0; i<visibleEntities.length; i++) {\n      let thisEntity = visibleEntities[i];\n      if (thisEntity === selectedEntity) {\n        appears = true;\n        break;\n      }\n    }\n    if (!appears) {\n      setSelectedEntity(null);\n    }\n  }\n\n  if (selectedEntityType === null) {\n    setSelectedEntityType(entityTypes[0].label);\n  }\n\n  let timeScale;\n  let relations = [];\n\n  // Translate time values to pixels\n  const outerRadiusAccessor = p => timeScale(p.data.end);\n  const innerRadiusAccessor = p => timeScale(p.data.start);\n\n  // If an entity has been selected, what is its time range? Use that to create time rings.\n  // Compile relationship data!\n  if (selectedEntity !== null) {\n    let { start, end } = selectedEntity;\n    timeScale = scaleLinear({ domain: [start, end], range: [startRadius, endRadius] });\n    relations = qrManager.getEntityRelations(selectedEntity, true);\n  }\n\n  function mouseOverRelation(event, datum) {\n    const coords = localPoint(event.target.ownerSVGElement, event);\n    const labelStr = `${datum.type}: ${datum.start} - ${datum.end}, ${datum.entity1} (${datum.role1}) and ${datum.entity2} (${datum.role2})`;\n    showTooltip({ tooltipLeft: coords.x, tooltipTop: coords.y, tooltipData: { label: labelStr } });\n  }\n\n  function clickEntityBtn(entity) {\n    setSelectedEntity(entity);\n    setSelectedEntityName(entity.label);\n  }\n\n  function selectNewEntityType(event) {\n    setSelectedEntityType(event.target.value);\n  }\n\n  return (\n    <Fragment>\n      <TimeSlider classes={inheritClasses} />\n\n      <div>\n        <SelectEntityType types={entityTypes} selected={selectedEntityType} onChange={selectNewEntityType} />\n        <TextField className={radarClasses.selectedName} label=\"Selected\"\n          margin=\"dense\" variant=\"outlined\"\n          value={ selectedEntityName }\n        />\n      </div>\n\n      <div className={radarClasses.outerWrapper}>\n        <div className={radarClasses.buttonColumn}>\n          <ButtonGroup orientation=\"vertical\" color=\"primary\" aria-label=\"vertical contained primary button group small\"\n            variant=\"contained\"\n          >\n            { visibleEntities.map(function(e) {\n              if (e.type === selectedEntityType) {\n                return (\n                  <Button className={radarClasses.button} key={e.id}\n                      variant={selectedEntity === e ? \"outlined\" : \"\"}\n                      onClick={() => clickEntityBtn(e)}\n                  >\n                    { e.label }\n                  </Button>\n                )\n              }\n              return null;\n            })}\n          </ButtonGroup>\n        </div>\n        <main className={radarClasses.graph}>\n          <svg width={pixWidth} height={pixHeight}>\n            <rect rx={10} width={pixWidth} height={pixHeight} fill={grey} />\n            <Group top={centerY} left={centerX}>\n              <Pie data={relations} pieValue={10} cornerRadius={4} padAngle={0.01}\n                outerRadius={outerRadiusAccessor} innerRadius={innerRadiusAccessor}\n              >\n                {pie => {\n                  return pie.arcs.map((arc, i) => {\n                    return (\n                      <g key={`seg-${arc.data.label}-${i}`}>\n                        <path d={pie.path(arc)} fill={arc.data.typeColor} fillOpacity={1}\n                          stroke={black} strokeWidth=\"1\"\n                          onMouseOver={(event) => mouseOverRelation(event, arc.data)}\n                          onMouseOut={hideTooltip}\n                        />\n                      </g>\n                    );\n                  });\n                }}\n              </Pie>\n              {timeScale && timeScale.ticks().map((tick, i) => {\n                const r = timeScale(tick);\n                return (\n                  <g key={`time-ring-${i}`}>\n                    <circle r={r} stroke={black} strokeWidth=\"2\" fill=\"none\" fillOpacity={0.8} strokeOpacity={0.2} />\n                    <text y={-r} dy={'-.33em'} fontSize={8} fill={black} fillOpacity={0.8} textAnchor=\"middle\">\n                      {tick}\n                    </text>\n                  </g>\n                );\n              })}\n            </Group>\n          </svg>\n        </main>\n      </div>\n\n      {tooltipOpen && tooltipData && (\n        <Tooltip top={tooltipTop} left={tooltipLeft}>\n          <div className={radarClasses.tooltip}>\n            { tooltipData.label }\n          </div>\n        </Tooltip>\n      )}\n    </Fragment>\n  )\n}\n\nexport default withTooltip(EgoTimeRadar);\n","/***\n * EgoRings -- User selects the entity from a list; that entity\n *      is put at center of graph, each connected entity on a ring\n *      moving outwards. User can select number of rings displayed.\n * \n * This viz was initially derived from https://vx-demo.now.sh/linkTypes\n *\n * TODO\n *    Select type of entity shown on button list\n *    Color Link between entities acc to relation type, give info on hover\n *    Create Context with reducers to simplify filtering ?\n */\n\n\nimport React, { Fragment, useState, useContext } from 'react';\n\n// Material-UI\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport TextField from '@material-ui/core/TextField';\n\n// D3\nimport { hierarchy } from 'd3-hierarchy';\nimport { pointRadial } from 'd3-shape';\n\n// VX\nimport { localPoint } from '@vx/event';\nimport { Tree } from '@vx/hierarchy';\nimport { Group } from '@vx/group';\nimport { LinkRadial } from '@vx/shape';\nimport { withTooltip, Tooltip } from '@vx/tooltip';\n\n// App-specific components\nimport TimeSlider from './TimeSlider';\nimport { TimeContext } from '../TimeConstraintsContext';\nimport { SelectEntityType } from './SelectEntityType';\n\nconst buttonWidth = 200;  // Pixel width of button column (with entity names)\n\nconst pixWidth = 600;\nconst pixHeight = 600;\nconst centerY = pixHeight / 2;\nconst centerX = pixWidth / 2;\n\nconst startRadius = 20;   // pixel start of circles (1st ring)\nconst endRadius = ((pixWidth / 2) - 20);  // pixel end of circles (last ring)\nconst stepPercent = 0.5;\n\nconst white = '#ffffff';\nconst grey = '#999999';\nconst black = '#000000';\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 180,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  outerWrapper: {\n    display: 'flex',\n    padding: theme.spacing(0),\n    '& > *': {\n      margin: theme.spacing(0),\n    },\n  },\n  buttonColumn: {\n    width: buttonWidth,\n    maxHeight: `${pixHeight}px`,\n    overflowY: 'scroll',\n    fontSize: '10px',\n    flexShrink: 0,\n    margin: theme.spacing(0),\n  },\n  buttonPaper: {\n    width: buttonWidth,\n  },\n  button: {\n    fontSize: '10px',\n    padding: theme.spacing(1),\n  },\n  graph: {\n    flexGrow: 1,\n    padding: theme.spacing(0),\n    margin: theme.spacing(0),\n  },\n  tooltip: {\n    backgroundColor: 'black',\n    color: 'lightblue',\n    padding: 6,\n    fontSize: 12,\n    boxShadow: '0 4px 8px 0 rgba(25, 29, 34, 0.1)',\n    pointerEvents: 'none',\n    maxWidth: '250px',\n    borderRadius: 3,\n    border: '2px solid rgba(25, 29, 34, 0.12)',\n  },\n}));\n\nfunction EgoRings(props) {\n  const {\n    inheritClasses,\n    qrManager,\n    tooltipOpen,\n    tooltipData,\n    tooltipLeft,\n    tooltipTop,\n    hideTooltip,\n    showTooltip,\n  } = props;\n\n  const ringClasses = useStyles();\n  const [state] = useContext(TimeContext);\n\n  // Get list of entity types\n  const entityTypes = qrManager.getEntityTypes();\n\n  const [selectedEntityType, setSelectedEntityType] = useState(null);\n  const [selectedEntity, setSelectedEntity] = useState(null);\n  const [selectedEntityName, setSelectedEntityName] = useState('');\n  const [numRings, setNumRings] = useState(2);\n\n  // Get list of entities qualified by time parameters\n  const visibleEntities = qrManager.getEntities(state.active, state.current);\n\n  let tree;\n\n  if (selectedEntity !== null) {\n    let prepTree = true;\n\n    // As Time Slider may have made last selection invisible, check that it is still available\n    if (state.active) {\n      let appears = false;\n      for (let i=0; i<visibleEntities.length; i++) {\n        let thisEntity = visibleEntities[i];\n        if (thisEntity === selectedEntity) {\n          appears = true;\n          break;\n        }\n      }\n      if (!appears) {\n        setSelectedEntity(null);\n        prepTree = false;\n      }\n    }\n    // If an entity has been selected and is valid, create hierarchical tree centered on it\n    if (prepTree) {\n      let eh = qrManager.getEntityHierarchy(selectedEntity, numRings, state.active, state.current);\n      tree = hierarchy(eh);\n    }\n  }\n\n  if (selectedEntityType === null) {\n    setSelectedEntityType(entityTypes[0].label);\n  }\n\n  function mouseOverEntity(event, entity) {\n    const coords = localPoint(event.target.ownerSVGElement, event);\n    const labelStr = `${entity.label}: ${entity.typeLabel}, ${entity.start} - ${entity.end}`;\n    showTooltip({ tooltipLeft: coords.x, tooltipTop: coords.y, tooltipData: { label: labelStr } });\n  }\n\n  function clickEntityBtn(entity) {\n    setSelectedEntity(entity);\n    setSelectedEntityName(entity.label);\n  }\n\n  function selectNumRings(event) {\n    setNumRings(event.target.value);\n  }\n\n  function selectNewEntityType(event) {\n    setSelectedEntityType(event.target.value)\n  }\n\n  return (\n    <Fragment>\n      <TimeSlider classes={inheritClasses} />\n\n      <div>\n        <SelectEntityType types={entityTypes} selected={selectedEntityType} onChange={selectNewEntityType} />\n        <TextField className={ringClasses.selectedName} label=\"Selected\"\n          margin=\"dense\" variant=\"outlined\"\n          value={ selectedEntityName }\n        />\n\n        <FormControl className={ringClasses.formControl}>\n          <InputLabel id=\"select-num-rings-label\">Degrees of Separation</InputLabel>\n          <Select labelId=\"select-num-rings-label\" id=\"select-num-rings\" value={numRings} onChange={selectNumRings}>\n            <MenuItem value={1}>Two</MenuItem>\n            <MenuItem value={2}>Three</MenuItem>\n            <MenuItem value={3}>Four</MenuItem>\n            <MenuItem value={4}>Five</MenuItem>\n          </Select>\n        </FormControl>\n      </div>\n  \n      <div className={ringClasses.outerWrapper}>\n        <div className={ringClasses.buttonColumn}>\n          <ButtonGroup orientation=\"vertical\" color=\"primary\" aria-label=\"vertical contained primary button group small\"\n            variant=\"contained\"\n          >\n            { visibleEntities.map(function(e) {\n              if (e.type === selectedEntityType) {\n                return (\n                  <Button className={ringClasses.button} key={e.id}\n                      variant={selectedEntity === e ? \"outlined\" : \"\"}\n                      onClick={() => clickEntityBtn(e)}\n                  >\n                    { e.label }\n                  </Button>\n                )\n              }\n              return null;\n            })}\n          </ButtonGroup>\n        </div>\n        <main className={ringClasses.graph}>\n          <svg width={pixWidth} height={pixHeight}>\n            <rect width={pixWidth} height={pixHeight} fill={grey} rx={8} />\n            { (selectedEntity !== null && tree !== null) && (\n              <Tree root={tree} size={[2 * Math.PI, endRadius-startRadius]}\n                separation={(a, b) => (a.parent === b.parent ? 1 : 0.5) / a.depth}\n              >\n                {data => (\n                  <Group top={centerY} left={centerX}>\n                    {data.links().map((link, i) =>\n                      <LinkRadial data={link} percent={+stepPercent}\n                        stroke={black} strokeWidth=\"1\" fill=\"none\" key={i}\n                      />\n                     )}\n                    {data.descendants().map((node, key) => {\n                      const width = 30, height = 20;\n                      const [radialX, radialY] = pointRadial(node.x, node.y);\n                      const fullEntity = qrManager.expandEntity(node.data.entity);\n                      const strokeDash = !node.data.children ? '0' : '2,2';\n                      const rounding = !node.data.children ? 5 : 0;\n\n                      return (\n                        <Group top={radialY} left={radialX} key={key}>\n                          {node.depth === 0 && (\n                            <circle r={12} fill={fullEntity.typeColor}\n                              stroke={white} strokeWidth={1} strokeDasharray={strokeDash}\n                              onMouseOver={(event) => mouseOverEntity(event, fullEntity)}\n                              onMouseOut={hideTooltip}    \n                            />\n                            )}\n                          {node.depth !== 0 && (\n                            <rect height={height} width={width} y={-height / 2} x={-width / 2}\n                              fill={fullEntity.typeColor} rx={rounding}\n                              stroke={white} strokeWidth={1} strokeDasharray={strokeDash}\n                              onMouseOver={(event) => mouseOverEntity(event, fullEntity)}\n                              onMouseOut={hideTooltip}    \n                            />\n                          )}\n                        </Group>\n                      )\n                    })}\n                  </Group>\n                )}\n              </Tree>\n            )}\n          </svg>\n        </main>\n      </div>\n\n      {tooltipOpen && tooltipData && (\n        <Tooltip top={tooltipTop} left={tooltipLeft}>\n          <div className={ringClasses.tooltip}>\n            { tooltipData.label }\n          </div>\n        </Tooltip>\n      )}\n    </Fragment>\n  )\n}\n\nexport default withTooltip(EgoRings);\n","/***\n * ChoralConnections -- All entities are outer rings on chart, relations\n *    between them are chords between them.\n * \n * Derived from https://vx-demo.now.sh/chord\n *  using D3 chord package https://github.com/d3/d3-chord/tree/v1.0.6 \n * \n * TODO\n */\n\n\nimport React, { Fragment, useContext } from 'react';\n\n// Material-UI\nimport { makeStyles } from '@material-ui/core/styles';\n\n// VX\nimport { Group } from '@vx/group';\nimport { Arc } from '@vx/shape';\nimport { Chord, Ribbon } from '@vx/chord';\nimport { localPoint } from '@vx/event';\nimport { withTooltip, Tooltip } from '@vx/tooltip';\n\n// App-specific components\nimport TimeSlider from './TimeSlider'\nimport { TimeContext } from '../TimeConstraintsContext';\n\nfunction descending(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n\nconst pixWidth = 600;\nconst pixHeight = 600;\nconst centerSize = 20;\nconst centerY = pixHeight / 2;\nconst centerX = pixWidth / 2;\n\n// const white = '#ffffff';\nconst grey = '#999999';\nconst black = '#000000';\n\nconst useStyles = makeStyles((theme) => ({\n  outerWrapper: {\n    display: 'flex',\n    padding: theme.spacing(0),\n    '& > *': {\n      margin: theme.spacing(0),\n    },\n  },\n  graph: {\n    flexGrow: 1,\n    padding: theme.spacing(0),\n    margin: theme.spacing(0),\n  },\n  tooltip: {\n    backgroundColor: 'black',\n    color: 'lightblue',\n    padding: 6,\n    fontSize: 12,\n    boxShadow: '0 4px 8px 0 rgba(25, 29, 34, 0.1)',\n    pointerEvents: 'none',\n    maxWidth: '250px',\n    borderRadius: 3,\n    border: '2px solid rgba(25, 29, 34, 0.12)',\n  },\n}));\n\nfunction ChordConnections (props) {\n  const {\n    inheritClasses,\n    qrManager,\n    tooltipOpen,\n    tooltipData,\n    tooltipLeft,\n    tooltipTop,\n    hideTooltip,\n    showTooltip,\n  } = props;\n\n  const chordClasses = useStyles();\n  const [state] = useContext(TimeContext);\n\n  const outerRadius = Math.min(pixWidth, pixHeight) * 0.5 - (centerSize + 10);\n  const innerRadius = outerRadius - centerSize;\n\n  let { matrix, linkIndices, entities, relations } = qrManager.getMatrix(state.active, state.current);\n\n  function mouseOverEntity(event, expandedEntity) {\n    const coords = localPoint(event.target.ownerSVGElement, event);\n    const labelStr = `${expandedEntity.label}: ${expandedEntity.typeLabel}, ${expandedEntity.start} - ${expandedEntity.end}`;\n    showTooltip({ tooltipLeft: coords.x, tooltipTop: coords.y, tooltipData: { label: labelStr } });\n  }\n\n  function mouseOverRelation(event, expandedRelation, sourceIndex, targetIndex) {\n    const coords = localPoint(event.target.ownerSVGElement, event);\n    const fromEntity = entities[sourceIndex];\n    const toEntity = entities[targetIndex];\n    const labelStr = `${expandedRelation.typeLabel} from ${fromEntity.label} (as ${expandedRelation.role1}) `+\n            `to ${toEntity.label} (as ${expandedRelation.role2}) ${expandedRelation.start} - ${expandedRelation.end}`;\n    showTooltip({ tooltipLeft: coords.x, tooltipTop: coords.y, tooltipData: { label: labelStr } });\n  }\n\n  return (\n    <Fragment>\n      <TimeSlider classes={inheritClasses} />\n\n      <div className={chordClasses.outerWrapper}>\n        <main className={chordClasses.graph}>\n          <svg width={pixWidth} height={pixHeight}>\n            <rect width={pixWidth} height={pixHeight} fill={grey} rx={8} />\n            <Group top={centerY} left={centerX}>\n              <Chord matrix={matrix} padAngle={0.05} sortSubgroups={descending}>\n                {({ chords }) => {\n                  return (\n                    <g>\n                      {chords.groups.map((group, i) => {\n                        const expandedEntity = qrManager.expandEntity(entities[group.index]);\n\n                        return (\n                          <Arc key={`key-${i}`} data={group} fill={expandedEntity.typeColor}\n                            innerRadius={innerRadius} outerRadius={outerRadius}\n                            strokeWidth={1} stroke={black}\n                            onMouseOver={(event) => mouseOverEntity(event, expandedEntity)}\n                            onMouseOut={hideTooltip}\n                          />\n                        );\n                      })}\n\n                      {chords.map((chord, i) => {\n                        const sourceIndex = chord.source.index;\n                        const targetIndex = chord.target.index;\n                        const linkIndex = linkIndices[sourceIndex][targetIndex];\n                        const expandedRelation = qrManager.expandRelation(relations[linkIndex]);\n\n                        return (\n                          <Ribbon key={`ribbon-${i}`} chord={chord} fill={expandedRelation.typeColor} radius={innerRadius}\n                            strokeWidth={1} stroke={black}\n                            onMouseOver={(event) => mouseOverRelation(event, expandedRelation, sourceIndex, targetIndex)}\n                            onMouseOut={hideTooltip}\n                          />\n                        );\n                      })}\n                    </g>\n                  );\n                }}\n              </Chord>\n            </Group>\n          </svg>\n        </main>\n      </div>\n\n      {tooltipOpen && tooltipData && (\n        <Tooltip top={tooltipTop} left={tooltipLeft}>\n          <div className={chordClasses.tooltip}>\n            { tooltipData.label }\n          </div>\n        </Tooltip>\n      )}\n    </Fragment>\n  );\n};\n\nexport default withTooltip(ChordConnections);","/***\n * Qualified Relationships -- Visualiations\n *  By Michael Newton April 2020 (drawing on my earlier work in UNC Digital Innovation Lab)\n * \n * NOTES\n *    Technique of using reducer with Context from https://www.sitepoint.com/replace-redux-react-hooks-context-api/\n *    See also https://medium.com/simply/state-management-with-react-hooks-and-context-api-at-10-lines-of-code-baf6be8302c\n * TODO\n *     Create Relationship type filter?\n *  */\n\nimport React, { useState } from 'react';\n\n// Material-UI\nimport { makeStyles, createMuiTheme } from '@material-ui/core/styles';\nimport ThemeProvider from '@material-ui/styles/ThemeProvider';\nimport Drawer from '@material-ui/core/Drawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\n// import Divider from '@material-ui/core/Divider';\n\n//===============================\n// Components defined by this App\nimport { TimeContextProvider } from './TimeConstraintsContext';\nimport QRManager from './relationships/QRManager';\nimport { dataEntities, entityDefs, dataRelationDefs, dataRelations, dataTimeSettings } from './relationships/dataset';\nimport ListView from './components/ListView.jsx';\nimport EgoTimeRadar from './components/EgoTimeRadar.jsx';\nimport EgoRings from './components/EgoRings.jsx';\nimport ChordConnections from './components/ChordConnections.jsx';\n\nconst drawerWidth = 170;\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n  // necessary for content to be below app bar\n  toolbar: theme.mixins.toolbar,\n}));\n\nconst darkTheme = createMuiTheme({\n  palette: {\n    type: 'dark',\n  },\n});\n\nconst displayModes = {\n  desc: \"Description\",\n  list: \"View As List\",\n  egoTimeRadar: \"View As Ego Time Radar\",\n  egoRings: \"View As Ego Rings\",\n  chords: 'View as Chorded Ring',\n}\n\nconst qrManager = QRManager(entityDefs, dataEntities, dataRelationDefs, dataRelations);\n\nfunction descriptionText() {\n  return <React.Fragment>\n    <Typography variant=\"h5\" gutterBottom>\n      Description\n    </Typography>\n    <Typography paragraph>\n      This is a workbench demonstration of Qualified Relationships between entities.\n      There is a number of different kinds of defined relationships and roles in those relationships,\n      and they can also be qualified by time period.\n    </Typography>\n\n    <Typography variant=\"h5\" gutterBottom>\n      Views\n    </Typography>\n    <Typography paragraph>\n      The list view simply provides a simple spreadsheet-like view of the various relationships.\n    </Typography>\n\n    <Typography variant=\"h5\" gutterBottom>\n      Data Structures\n    </Typography>\n    <Typography paragraph>\n      The entities in this demonstration data set have the following attributes: id, label, start, end.\n    </Typography>\n    <Typography paragraph>\n      Each relationship type definition has the following attributes: label, types, roles, and colors for types and roles.\n    </Typography>\n    <Typography paragraph>\n      Each relationship has the following attributes: type, entity1, entity2, role1, role2, start, end.\n    </Typography>\n  </React.Fragment>\n} // descriptionText()\n\nfunction App() {\n  const [displayMode, setDisplayMode] = useState(displayModes.desc);\n  const classes = useStyles();\n\n  return (\n    <ThemeProvider theme={darkTheme}>\n      <TimeContextProvider initialState={dataTimeSettings}>\n        <div className={classes.root}>\n          <CssBaseline />\n          <AppBar position=\"fixed\" className={classes.appBar}>\n            <Toolbar>\n              <Typography variant=\"h6\" noWrap>\n                Qualified Relationship Viewer\n              </Typography>\n            </Toolbar>\n          </AppBar>\n          <Drawer className={classes.drawer} variant=\"permanent\" classes={{ paper: classes.drawerPaper }} >\n            <div className={classes.toolbar} />\n            <List dense>\n              <ListItem button selected={displayMode === displayModes.desc} onClick={() => setDisplayMode(displayModes.desc)}>\n                <ListItemText primary={displayModes.desc} />\n              </ListItem>\n              <ListItem button selected={displayMode === displayModes.list} onClick={() => setDisplayMode(displayModes.list)}>\n                <ListItemText primary={displayModes.list} />\n              </ListItem>\n              <ListItem button selected={displayMode === displayModes.egoTimeRadar} onClick={() => setDisplayMode(displayModes.egoTimeRadar)}>\n                <ListItemText primary={displayModes.egoTimeRadar} />\n              </ListItem>\n              <ListItem button selected={displayMode === displayModes.egoRings} onClick={() => setDisplayMode(displayModes.egoRings)}>\n                <ListItemText primary={displayModes.egoRings} />\n              </ListItem>\n              <ListItem button selected={displayMode === displayModes.chords} onClick={() => setDisplayMode(displayModes.chords)}>\n                <ListItemText primary={displayModes.chords} />\n              </ListItem>\n            </List>\n          </Drawer>\n          <main className={classes.content}>\n            <div className={classes.toolbar} />\n            {{ \n              [displayModes.desc]: descriptionText(),\n              [displayModes.list]: <ListView inheritClasses={classes} qrManager={qrManager} />,\n              [displayModes.egoTimeRadar]: <EgoTimeRadar inheritClasses={classes} qrManager={qrManager} />,\n              [displayModes.egoRings]: <EgoRings inheritClasses={classes} qrManager={qrManager} />,\n              [displayModes.chords]: <ChordConnections inheritClasses={classes} qrManager={qrManager} />,\n            }[displayMode]}\n          </main>\n        </div>\n      </TimeContextProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n/* <React.StrictMode>\n<App />\n</React.StrictMode>, */\n\nReactDOM.render(\n  <App />, document.getElementById('root')\n);\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}